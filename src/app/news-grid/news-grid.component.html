<div class="news-container">
  <div class="header-section">
    <h2>Haber YÃ¶netimi</h2>
    
    <!-- Arama BÃ¶lÃ¼mÃ¼ -->
    <div class="search-section">
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Haberlerde Ara...</mat-label>
        <input 
          matInput 
          [(ngModel)]="searchTerm" 
          (input)="applyFilter()"
          placeholder="BaÅŸlÄ±k, iÃ§erik ile ara"
          #searchInput>
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
      
      <button 
        mat-icon-button 
        *ngIf="searchTerm" 
        (click)="clearSearch()"
        class="clear-button"
        matTooltip="AramayÄ± temizle">
        <mat-icon>clear</mat-icon>
      </button>
    </div>
    
    <!-- SonuÃ§ sayÄ±sÄ± ve sayfa bilgisi -->
    <div class="results-info">
      <span class="results-count" *ngIf="searchTerm">
        "{{ searchTerm }}" iÃ§in {{ dataSource.data.length }} sonuÃ§ bulundu
      </span>
      <span class="page-info">
        Toplam {{ totalItems }} haber - Sayfa {{ currentPage }} / {{ totalPages }}
      </span>
    </div>
  </div>
  
  <mat-table [dataSource]="dataSource" class="mat-elevation-8">
    <!-- BaÅŸlÄ±k Kolonu -->
    <ng-container matColumnDef="baslik">
      <th mat-header-cell *matHeaderCellDef>BaÅŸlÄ±k</th>
      <td mat-cell *matCellDef="let haber">{{ haber.baslik }}</td>
    </ng-container>

    <!-- Ä°Ã§erik Kolonu -->
    <ng-container matColumnDef="icerik">
      <th mat-header-cell *matHeaderCellDef>Ä°Ã§erik</th>
      <td mat-cell *matCellDef="let haber">{{ truncateText(haber.icerik, 50) }}</td>
    </ng-container>

    <!-- YayÄ±n Tarihi Kolonu -->
    <ng-container matColumnDef="yayinTarihi">
      <th mat-header-cell *matHeaderCellDef>YayÄ±n Tarihi</th>
      <td mat-cell *matCellDef="let haber">{{ haber.yayinTarihi | date:'dd/MM/yyyy' }}</td>
    </ng-container>

    <!-- Kategori ID Kolonu -->
    <ng-container matColumnDef="kategoriId">
      <th mat-header-cell *matHeaderCellDef>Kategori ID</th>
      <td mat-cell *matCellDef="let haber">{{ haber.kategoriId || 'N/A' }}</td>
    </ng-container>

    <!-- Aksiyonlar Kolonu -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Aksiyonlar</th>
      <td mat-cell *matCellDef="let haber">
        <div class="actions-container">
          <button mat-raised-button color="primary" class="read-button" (click)="openNewsDialog(haber)">
            ğŸ‘ Oku
          </button>
          <span class="status-badge" [ngClass]="{'approved': haber.onaylandi, 'pending': !haber.onaylandi}">
            {{ haber.onaylandi ? 'OnaylandÄ±' : 'Bekliyor' }}
          </span>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </mat-table>

  <!-- Ã–zel Sayfalama Kontrolleri -->
  <div class="custom-pagination" *ngIf="totalPages > 1">
    <div class="pagination-info">
      <span>{{ (currentPage - 1) * pageSize + 1 }} - {{ Math.min(currentPage * pageSize, totalItems) }} / {{ totalItems }}</span>
    </div>
    
    <div class="pagination-controls">
      <!-- Ä°lk sayfa -->
      <button 
        mat-icon-button 
        [disabled]="!hasPreviousPage()"
        (click)="onPageChange('first')"
        matTooltip="Ä°lk sayfa">
        <mat-icon>first_page</mat-icon>
      </button>
      
      <!-- Ã–nceki sayfa -->
      <button 
        mat-icon-button 
        [disabled]="!hasPreviousPage()"
        (click)="onPageChange('prev')"
        matTooltip="Ã–nceki sayfa">
        <mat-icon>chevron_left</mat-icon>
      </button>
      
      <!-- Sayfa numaralarÄ± -->
      <div class="page-numbers">
        <button 
          *ngFor="let page of getPageNumbers()" 
          mat-button
          [class.current-page]="page === currentPage"
          (click)="onPageChange(page)">
          {{ page }}
        </button>
      </div>
      
      <!-- Sonraki sayfa -->
      <button 
        mat-icon-button 
        [disabled]="!hasNextPage()"
        (click)="onPageChange('next')"
        matTooltip="Sonraki sayfa">
        <mat-icon>chevron_right</mat-icon>
      </button>
      
      <!-- Son sayfa -->
      <button 
        mat-icon-button 
        [disabled]="!hasNextPage()"
        (click)="onPageChange('last')"
        matTooltip="Son sayfa">
        <mat-icon>last_page</mat-icon>
      </button>
    </div>
    
    <!-- Sayfa boyutu seÃ§ici -->
    <div class="page-size-selector">
      <mat-form-field appearance="outline">
        <mat-label>Sayfa boyutu</mat-label>
        <mat-select [value]="pageSize" (selectionChange)="onPageSizeChange($event.value)">
          <mat-option [value]="5">5</mat-option>
          <mat-option [value]="10">10</mat-option>
          <mat-option [value]="20">20</mat-option>
          <mat-option [value]="50">50</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
</div>

    <div class="most-read-clicked-section">
        <span>En Ã§ok okunan/tÄ±klanan haberleri gÃ¶rmek iÃ§in tÄ±klayÄ±nÄ±z</span>
        <button mat-raised-button color="primary" (click)="navigateToMostReadClicked()">GÃ¶ster</button>
    </div>